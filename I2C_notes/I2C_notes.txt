26.3.3 I2C master mode
Последовательная передача данных начинается с состояния "start", а завершается на
состоянии "stop".
Режим "Master" назначается сразу же после того как на шине генерируется состояние "start"
посредством выставления бита "START".
Последовательность действий:
    - В регистре I2C_CR2 настроить тактовую частотую периферии.
    - Настроить регистры управления тактированием.
    - Настроить регистр пробуждения.
    - В регистре I2C_CR1 активировать периферию.
    - В регистре I2C_CR1 выставить бит "START", чтобы сгенерировать состояние "start".
Частота тактирования периферии должна быть от 2 МГц для режима Sm и от 4 МГц для
режима Fm.


SCL master clock generation
Биты CCR генерируют высокий и низкий уровни тектирования SCL - восходящего и нисходящего
фронтов соответственно. Т.к. slave может прижать линию SCL, то периферия проверяет
входной сигнал SCL с шины по окончанию временного периода, заданного в регистре
I2C_TRISE.
    - Если на SCL низкий уровень, значит slave прижал ее. В таком случае прекращается
      инкремент счетчика высокого уровня, пока на SCL опять не появится высокий сигнал.
      Это гарантирует минимальный период уровня HIGH тактирования SCL.
    - Если на SCL высокий уровень, счетчик высокого сигнала продолжает отсчет.
TODO:


Start condition.
При выставлении бита I2C_CR1_START=1, I2C-интерфейс начинает генерировать условие "start"
и происходит переключение в режим "Master" (бит I2C_SR2_MSL=1) сразу после того, как
бит I2C_SR2_BUSY=0.
Важно: в режиме "Master" выставление бита I2C_CR1_START=1 приводит к тому, что I2C-
интерфейс будет генерировать условие "ReStart" в конце передачи текущего байта.
Как только условие "Start" будет передано по шине, выставляется бит I2C_SR1_SB=1.
Далее master ждет чтения регистра I2C_SR1 и записи в регистр I2C_DR адреса ведомого
устройства.


Slave address transmission
Адрес ведомого устройства передается на линию SDA посредством внутреннего сдвигового
регистра. Как только байт с адресом будет отправлен, аппаратно выставляется бит
I2C_SR1_ADDR=1. Затем ведущий ждет пока не будут вычитаны регистры SR1 и SR2.
Если младший бит адреса ведомого устройства имеет значение "0", значит ведущее
устройство передает данные. Иначе - ожидает данные от ведомого.


Master transmitter
После передачи адреса - когда I2C_SR1_ADDR="0", ведущий передает байты от
I2C_DR по линии SDA посредством внутреннего сдвигового регистра. Ведущий ожидает, пока
в I2C_DR не будет вписан первый байт.
После того, как будет принят пульс "ACK", тогда аппаратно выставляется I2C_SR1_TxE="1".
Если I2C_SR1_TxE="1", но данные не вписаны в I2C_DR, а передача уже завершена, то
выставляется I2C_SR1_BTF="1", а интерфейс I2C ждет пока этот бит не будет снят
посредством считывания регистра I2C_SR1 и записи в регистр I2C_DR.

Closing the communication
Завершение передачи знаменуется программной записью бита I2C_CR1_STOP="1", когда
I2C_SR1_TxE="1" или I2C_SR1_BTF="1" 
